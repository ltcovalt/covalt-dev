---
import { Link } from "@components";
import { Link } from "@components";
import { ArticleLayout } from "@layouts";
import { getCollection, getEntry } from "astro:content";

let posts = await getCollection("posts", ({ data }) => !data.draft);
// sort newest â†’ oldest
posts = posts.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---

<ArticleLayout title="covalt.dev">
	<h1>Posts</h1>
	{
		posts.map((post) => (
			<li class="list-none">
				{post.data.date.toISOString().split('T')[0]} - 
				<Link href={`/posts/${post.id}`}>
					{post.data.title}
				</Link>
			</li>
		))
	}
</ArticleLayout>
